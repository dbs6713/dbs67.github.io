<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Don B. Stringham"><meta name=description content="https://donbstringham.com"><meta name=keywords content="blog,developer,personal"><meta property="og:site_name" content="Don B. Stringham"><meta property="og:title" content="
  Optimizing the realpath_cache - Don B. Stringham
"><meta property="og:description" content="Better PHP performance by optimizing realpath_cache"><meta property="og:type" content="website"><meta property="og:url" content="https://donbstringham.com/posts/2015-03-09-optimizing-realpath_cache/"><meta property="og:image" content="https://donbstringham.com"><meta name=twitter:card content="summary"><meta name=twitter:site content="https://donbstringham.com/posts/2015-03-09-optimizing-realpath_cache/"><meta name=twitter:image content="https://donbstringham.com"><base href=https://donbstringham.com/posts/2015-03-09-optimizing-realpath_cache/><title>Optimizing the realpath_cache - Don B. Stringham
</title><link rel=canonical href=https://donbstringham.com/posts/2015-03-09-optimizing-realpath_cache/><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700"><link rel=stylesheet href=/css/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=alternate href=https://donbstringham.com/index.xml type=application/rss+xml title="Don B. Stringham"><link href=https://donbstringham.com/index.xml rel=feed type=application/rss+xml title="Don B. Stringham"><meta name=generator content="Hugo 0.120.4"></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Don B. Stringham</a>
<input type=checkbox id=menu-control>
<label class="menu-mobile float-right" for=menu-control><span class="btn-mobile float-right">&#9776;</span><ul class=navigation-list><li class="navigation-item align-center"><a class=navigation-link href=https://donbstringham.com/about>About</a></li><li class="navigation-item align-center"><a class=navigation-link href=https://donbstringham.com/resume>Resume</a></li><li class="navigation-item align-center"><a class=navigation-link href=https://donbstringham.com/contact>Contact</a></li><li class="navigation-item align-center"><a class=navigation-link href=https://donbstringham.com/posts>Posts</a></li></ul></label></section></nav><div class=content><section class="container page"><article><header><h1>Optimizing the realpath_cache</h1></header><p>Better PHP performance by optimizing <em>realpath_cache</em>!</p><p>System calls are big performance hits on an OS. Systems calls typically lead to context switches in which the CPU state is saved and retrieved during which kernal code in the CPU pipeline. Anyways, filesystem access definitely uses system calls in an OS. PHP does that a lot especially during <em>include</em>, <em>require</em>, <em>include_one</em> and <em>require_once</em>. Anytime a file is accessed PHP will issue a <code>realpath</code> call. This call asks the system for path information mainly using the the <code>lstat</code> system call. To help improve performance <code>realpath</code> will put the returned information into a cache.</p><p>To see the data in the <code>realpath</code> cache you can use the PHP function <code>realpath_cache_get()</code> which will show you an array path information. Even with a simple script you can get up to a dozen entries. For small to medium sized PHP applications the defaults for the cache will be fine. But if you are using a framework and/or builing an enterprise PHP application the cache size can quickly run out. It is good practice to add <code>realpath_cache_size = 1024k</code> to the <em>php.ini</em> to ensure the cache is large enough to hold all the path entries.</p><p>Another issue with <code>realpath_cache</code> is that TTL (time to live) is defaulted to two minutes. Again for a small, short running script that is fine but for a medium to large application, one that is longer running the TTL is too short. A good practice is to add the line <code>realpath_cache_ttl = 360</code> to the <em>php.ini</em> thereby keeping the path information in the cache a lot longer.</p><p>These two additions to <em>php.ini</em> should ensure better performance in your medium to large PHP web and client applications.</p></article></section></div><footer class=footer><section class=container><div class="sns-shares sp-sns-shares"><a class="sns-share linkedIn-share" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fdonbstringham.com%2fposts%2f2015-03-09-optimizing-realpath_cache%2f"><i class="fab fa-linkedin"></i></a></div><p>2023 © Don B. Stringham</p>© 2022</section></footer><div class=fixed-bar><section class=container><div class="sns-shares pc-sns-shares"><a class="sns-share linkedIn-share" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fdonbstringham.com%2fposts%2f2015-03-09-optimizing-realpath_cache%2f"><i class="fab fa-linkedin"></i></a></div></section></div></main><script src=/js/app.js></script></body></html>